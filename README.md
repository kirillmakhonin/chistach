# Chistach
Данный скрипт командной строки предназначен для поиска неиспользуемых функций в PHP коде.

## Требования
- PHP 7
- Отсутствие ООП в коде
- Уникальные имена функций по проекту
- Доступ на запись в директорию проекта, доступ на чтение файлов проекта

## Использование
**> ./analyzer.php [OPTIONS] <root_directory> <start_file>**
### Параметры:
- `--verbose`     выводить отладочные сообщения
- `--cache=dir`   установить имя папки кеширования в корне проекта (по умолчанию `.chistach`)
- `--multi`       анализировать все файлы в проекте
- `--graph=path`  построить .dot файл для Graphviz
- `--help`        отобразить справку

## Примеры использования
- `./analyzer.php examples/complex_0 file1.php`
- `./analyzer.php examples/complex_0 index.php`
- `./analyzer.php --multi examples/complex_0 index.php`

### Графы
При использовании параметра `--graph=path` на выходе получается файл в формате dot. Для рендера изображения необходимо использовать утилиту dot, идущую в пакете Graphviz.
**Пример:**
`dot -Tpng -o call_graph.png call_graph.dot`

## Принцип работы
1. Строится древо файлов, сравнивается с таким же деревом файлов (с иным суффиксом) в кеш-папке
2. Для тех файлов, у которых время изменения больше времени изменения оригинальных файлов строится кеш и сохраняется в кеш-папке
3. Загружаются данные из всех кеш-файлов
4. Производится анализ вызовов
